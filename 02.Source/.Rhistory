row.names = FALSE)
table_age <- aggregate(age_apl ~ cd_issue, data = df, mean)
colnames(table_age) <- c(prepro_nm[,1][4], prepro_nm[,1][20])
write.xlsx(table_age,
file = "C:\\19project\\07.UCK\\03.Output\\03.DCB\\DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][7],
append = TRUE,
row.names = FALSE)
table_cd_ar <- data.table(table(df$cd_issue, df$age_ran))
table_cd_ar$V2 <- factor(table_cd_ar$V2, levels = c(prepro_nm[,1][21], prepro_nm[,1][22], prepro_nm[,1][23], prepro_nm[,1][24], prepro_nm[,1][25],
prepro_nm[,1][26], prepro_nm[,1][27], prepro_nm[,1][28], prepro_nm[,1][29], prepro_nm[,1][30]))
table_cd_ar <- dcast(table_cd_ar, V1 ~ V2, value.var = 'N')
names(table_cd_ar)[1] <- c(prepro_nm[,1][4])
write.xlsx(table_cd_ar,
file = "C:\\19project\\07.UCK\\03.Output\\03.DCB\\DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][8],
append = TRUE,
row.names = FALSE)
table_h <- data.frame(table(df$h_reg_mw))
table_h <- table_h %>%
mutate(percent = (Freq/sum(Freq)))
table_h$percent <- round(table_h$percent, 2)
names(table_h) <- c(prepro_nm[,1][5], prepro_nm[,1][2], prepro_nm[,1][3])
write.xlsx(table_h,
file = "C:\\19project\\07.UCK\\03.Output\\03.DCB\\DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][9],
append = TRUE,
row.names = FALSE)
table_h_c <- data.frame(table(df$h_reg_mw, df$cd_issue))
table_h_c <- dcast(table_h_c, Var1 ~ Var2, value.var = 'Freq')
names(table_h_c)[1] <- c(prepro_nm[,1][5])
write.xlsx(table_h_c,
file = "C:\\19project\\07.UCK\\03.Output\\03.DCB\\DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][10],
append = TRUE,
row.names = FALSE)
table_hr <- data.frame(table(df$h_ran))
table_hr <- table_hr %>%
mutate(percent = (Freq/sum(Freq)))
table_hr$percent <- round(table_hr$percent, 2)
setorder(table_hr, -Freq)
colnames(table_hr) <- c(prepro_nm[,1][6], prepro_nm[,1][2], prepro_nm[,1][3])
write.xlsx(table_hr,
file = "C:\\19project\\07.UCK\\03.Output\\03.DCB\\DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][11],
append = TRUE,
row.names = FALSE)
table_hr_c <- data.table(table(df$h_ran, df$cd_issue))
table_hr_c <- dcast(table_hr_c, V1 ~ V2, value.var = 'N')
setorder(table_hr_c, -V1)
names(table_hr_c)[1] <- c(prepro_nm[,1][6])
write.xlsx(table_hr_c,
file = "C:\\19project\\07.UCK\\03.Output\\03.DCB\\DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][12],
append = TRUE,
row.names = FALSE)
Sys.setenv(JAVA_HOME  =  'C:/Program Files/Java/jre1.8.0_241')
library(readxl)
library(lubridate)
library(stringr)
library(WriteXLS)
library(hms)
library(data.table)
library(dplyr)
library(ggplot2)
library(openxlsx)
library(reshape2)
filenames <- list.files('C:/19project/07.UCK/01.Data/01.Raw_data/05.DCB', pattern=glob2rx("*.csv"), full.names=TRUE)
df <- rbindlist(lapply(filenames, fread, encoding = 'unknown'))
df$uni_id <- str_trim(df$uni_id, side = c("both"))
df$center <- str_trim(df$center, side = c("both"))
df$dt_mw <- str_trim(df$dt_mw, side = c("both"))
df$hr_mw <- str_trim(df$hr_mw, side = c("both"))
df$cd_dngcho <- str_trim(df$cd_dngcho, side = c("both"))
df$cd_issue <- str_trim(df$cd_issue, side = c("both"))
df$cd_koreng <- str_trim(df$cd_koreng, side = c("both"))
df$cd_prvpub <- str_trim(df$cd_prvpub, side = c("both"))
df$cd_reciev <- str_trim(df$cd_reciev, side = c("both"))
df$sex_apl <- str_trim(df$sex_apl, side = c("both"))
df$age_apl <- str_trim(df$age_apl, side = c("both"))
df$add_apl <- str_trim(df$add_apl, side = c("both"))
df$nm_svr <- str_trim(df$nm_svr, side = c("both"))
write.csv(df, 'C:/19project/07.UCK/01.Data/02.Use_Data/DCB_Raw.csv', row.names = FALSE)
rm(df)
df <- read.csv('C:/19project/07.UCK/01.Data/02.Use_Data/DCB_Raw.csv', stringsAsFactor = FALSE)
df$dt_mw <- ymd(df$dt_mw)
df$hr_mw <- str_pad(df$hr_mw, 6, side = 'left', pad = '0')
df$hr_mw <- sapply(df$hr_mw, function(x)
paste(str_sub(x, -6, -5),
str_sub(x, -4, -3),
str_sub(x, -2),
sep = ':'),
USE.NAMES = FALSE
)
df$y_reg_mw <- year(df$dt_mw)
df$m_reg_mw <- month(df$dt_mw)
df$m_reg_mw <- str_pad(df$m_reg_mw, 2, side = 'left', pad = '0')
df$ym_reg_mw <- paste(df$y_reg_mw, df$m_reg_mw, sep = '')
df$h_reg_mw <- str_sub(df$hr_mw, 1,2)
df$d_reg_mw <- lubridate::wday(df$dt_mw, label = TRUE, abbr = FALSE)
df$d_reg_mw <- as.character(df$d_reg_mw)
prepro <- read.csv('C:/19project/07.UCK/01.Data/04.Setting_data/03.DCB/01.Preprocessing/h_ran_nm.csv', header = FALSE, stringsAsFactors = FALSE)
df$h_ran <- ifelse(df$h_reg_mw >= '09' & df$h_reg_mw < '18', prepro[, 1][1],
ifelse(df$h_reg_mw >= '18' & df$h_reg_mw <= '23', prepro[, 1][2],
ifelse(df$h_reg_mw >= '00' & df$h_reg_mw < '05', prepro[, 1][3], prepro[, 1][4]
)))
prepro_age <- read.csv('C:/19project/07.UCK/01.Data/04.Setting_data/03.DCB/01.Preprocessing/age_ran_nm.csv', header = FALSE, stringsAsFactors = FALSE)
df$age_apl <- as.integer(df$age_apl)
df$age_ran <- NA
idx <- which(df$age_apl < 20)
df$age_ran[idx] <- prepro_age[, 1][1]
rm(idx)
idx <- which(df$age_apl < 30 & df$age_apl >= 20)
df$age_ran[idx] <- prepro_age[, 1][2]
rm(idx)
idx <- which(df$age_apl < 40 & df$age_apl >= 30)
df$age_ran[idx] <- prepro_age[, 1][3]
rm(idx)
idx <- which(df$age_apl < 50 & df$age_apl >= 40)
df$age_ran[idx] <- prepro_age[, 1][4]
rm(idx)
idx <- which(df$age_apl < 60 & df$age_apl >= 50)
df$age_ran[idx] <- prepro_age[, 1][5]
rm(idx)
idx <- which(df$age_apl < 70 & df$age_apl >= 60)
df$age_ran[idx] <- prepro_age[, 1][6]
rm(idx)
idx <- which(df$age_apl < 80 & df$age_apl >= 70)
df$age_ran[idx] <- prepro_age[, 1][7]
rm(idx)
idx <- which(df$age_apl < 90 & df$age_apl >= 80)
df$age_ran[idx] <- prepro_age[, 1][8]
rm(idx)
idx <- which(df$age_apl < 100 & df$age_apl >= 90)
df$age_ran[idx] <- prepro_age[, 1][9]
rm(idx)
idx <- which(df$age_apl >= 100)
df$age_ran[idx] <- prepro_age[, 1][10]
rm(idx)
prepro_day <- read.csv('C:/19project/07.UCK/01.Data/04.Setting_data/03.DCB/01.Preprocessing/jj_day_nm.csv', header = FALSE, stringsAsFactors = FALSE)
df$jj <- ifelse((df$d_reg_mw == prepro_day[, 1][1])|(df$d_reg_mw == prepro_day[, 1][2])|(df$d_reg_mw == prepro_day[, 1][3])|(df$d_reg_mw == prepro_day[, 1][4])|(df$d_reg_mw == prepro_day[, 1][5])
, prepro_day[, 1][8], prepro_day[, 1][9])
df$count <- 1
write.csv(df, 'C:/19project/07.UCK/01.Data/03.Data_Preprocessing/03.DCB/DCB_Data_Preprocessing.csv', row.names = FALSE, fileEncoding = 'CP949')
df <- read.csv('C:/19project/07.UCK/01.Data/03.Data_Preprocessing/03.DCB/DCB_Data_Preprocessing.csv', stringsAsFactors = FALSE)
prepro_nm <- read.csv('C:/19project/07.UCK/01.Data/04.Setting_data/03.DCB/02.EDA/dcb_EDA_all_nm.csv', stringsAsFactors = FALSE, header = FALSE)
table_year <- data.table(table(df$y_reg_mw))
table_year <- table_year %>%
mutate(percent = (N/sum(N)))
table_year$percent <- round(table_year$percent, 2)
names(table_year) <- c(prepro_nm[,1][1], prepro_nm[,1][2], prepro_nm[,1][3])
write.xlsx(table_year,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][1],
append = TRUE,
row.names = FALSE)
table_cate <- data.table(table(df$cd_issue))
table_cate <- table_cate %>%
mutate(percent = (N/sum(N)))
table_cate$percent <- round(table_cate$percent, 2)
names(table_cate) <- c(prepro_nm[,1][4], prepro_nm[,1][2], prepro_nm[,1][3])
write.xlsx(table_cate,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][2],
append = TRUE,
row.names = FALSE)
table_min_year <- data.table(table(df$cd_issue, df$y_reg_mw))
table_min_year <- dcast(table_min_year, V1 ~ V2, value.var = 'N')
names(table_min_year)[1] <- c(prepro_nm[,1][4])
write.xlsx(table_min_year,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][3],
append = TRUE,
row.names = FALSE)
table_c <- data.table(table(df$m_reg_mw, df$y_reg_mw))
table_c$V1 <- as.numeric(table_c$V1)
table_c1 <- dcast(table_c, V2 ~V1, value.var = "N")
names(table_c1)[1] <- c(prepro_nm[,1][1])
write.xlsx(table_c1,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][4],
append = TRUE,
row.names = FALSE)
table_cd_m <- data.table(table(df$m_reg_mw, df$cd_issue))
table_cd_m$V1 <- as.numeric(table_cd_m$V1)
table_cd_m <- dcast(table_cd_m, V2 ~ V1, value.var = "N")
names(table_cd_m)[1] <- c(prepro_nm[,1][4])
write.xlsx(table_cd_m,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][5],
append = TRUE,
row.names = FALSE)
table_age_ran <- data.table(table(df$age_ran))
table_age_ran <- table_age_ran[c(2:10, 1),]
table_age_ran <- table_age_ran %>%
mutate(percent = (N/sum(N)))
table_age_ran$percent <- round(table_age_ran$percent, 2)
colnames(table_age_ran) <- c(prepro_nm[,1][19], prepro_nm[,1][2], prepro_nm[,1][3])
write.xlsx(table_age_ran,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][6],
append = TRUE,
row.names = FALSE)
table_age <- aggregate(age_apl ~ cd_issue, data = df, mean)
colnames(table_age) <- c(prepro_nm[,1][4], prepro_nm[,1][20])
write.xlsx(table_age,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][7],
append = TRUE,
row.names = FALSE)
table_cd_ar <- data.table(table(df$cd_issue, df$age_ran))
table_cd_ar$V2 <- factor(table_cd_ar$V2, levels = c(prepro_nm[,1][21], prepro_nm[,1][22], prepro_nm[,1][23], prepro_nm[,1][24], prepro_nm[,1][25],
prepro_nm[,1][26], prepro_nm[,1][27], prepro_nm[,1][28], prepro_nm[,1][29], prepro_nm[,1][30]))
table_cd_ar <- dcast(table_cd_ar, V1 ~ V2, value.var = 'N')
names(table_cd_ar)[1] <- c(prepro_nm[,1][4])
write.xlsx(table_cd_ar,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][8],
append = TRUE,
row.names = FALSE)
table_h <- data.frame(table(df$h_reg_mw))
table_h <- table_h %>%
mutate(percent = (Freq/sum(Freq)))
table_h$percent <- round(table_h$percent, 2)
names(table_h) <- c(prepro_nm[,1][5], prepro_nm[,1][2], prepro_nm[,1][3])
write.xlsx(table_h,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][9],
append = TRUE,
row.names = FALSE)
table_h_c <- data.frame(table(df$h_reg_mw, df$cd_issue))
table_h_c <- dcast(table_h_c, Var1 ~ Var2, value.var = 'Freq')
names(table_h_c)[1] <- c(prepro_nm[,1][5])
write.xlsx(table_h_c,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][10],
append = TRUE,
row.names = FALSE)
table_hr <- data.frame(table(df$h_ran))
table_hr <- table_hr %>%
mutate(percent = (Freq/sum(Freq)))
table_hr$percent <- round(table_hr$percent, 2)
setorder(table_hr, -Freq)
colnames(table_hr) <- c(prepro_nm[,1][6], prepro_nm[,1][2], prepro_nm[,1][3])
write.xlsx(table_hr,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][11],
append = TRUE,
row.names = FALSE)
table_hr_c <- data.table(table(df$h_ran, df$cd_issue))
table_hr_c <- dcast(table_hr_c, V1 ~ V2, value.var = 'N')
setorder(table_hr_c, -V1)
names(table_hr_c)[1] <- c(prepro_nm[,1][6])
write.xlsx(table_hr_c,
file = "C:/19project/07.UCK/03.Output/03.DCB/DCB_EDA_All.xlsx",
sheetName = prepro_nm[,2][12],
append = TRUE,
row.names = FALSE)
# Settings
mod <- read.csv('C:\\19project\\07.UCK\\01.Data\\04.Setting_data\\06.Modeling\\modeling_kr_nm.csv', header = FALSE, stringsAsFactors = FALSE)
select_yr <- read.csv('C:\\19project\\07.UCK\\01.Data\\04.Setting_data\\06.Modeling\\select_year.csv', header = FALSE, stringsAsFactors = FALSE)
yr_anal <- select_yr[, 2][1]
# Packages Loading
library(data.table)
library(dplyr)
#숫자 자릿수 옵션(지수형 표시 없앰)
options(scipen=10000)
#ggplot2 option
#theme_update(plot.title = element_text(hjust = 0.5))
# system messages in English
Sys.setenv(LANG = "en_US.UTF-8")
gid <- read.csv('C:\\19project\\07.UCK\\01.Data\\02.Use_Data\\GID_ID.csv', stringsAsFactors = FALSE)
gid <- data.table(gid[, 1])
names(gid)[1] <- c('gid')
# 02. 인구(census), 버스정류소 : jyd_pop_cen_servi_bus ----
# 버스, 국토지리정보원 인구 파일 2개 가져와서 결합
bs <- read.csv('C:\\19project\\07.UCK\\01.Data\\03.Data_Preprocessing\\06.Bus_Stop\\Bus_Stop_380m_800m_Buff_Count.csv', stringsAsFactors = FALSE)
cens <- read.csv('C:\\19project\\07.UCK\\01.Data\\03.Data_Preprocessing\\07.NGII_Pop\\NGII_Tot_Eld_WAG.csv', stringsAsFactors = FALSE)
bs_cens <- left_join(bs, cens, by = 'gid')
#names(jyd_pop_cen_servi_bus)
#cen_bus <- bs_cens[,c("gid",
#                     "eld_1810_v", "pro_1810_v", "you_1810_v",
#                     "chi_1810_v", "pri_1810_v", "mid_1810_v", "hig_1810_v",
#                     "c_bus_stat")]
cen_bus <- bs_cens[,c("gid", "BS", "Eld_10", "WAG_10")]
jyd_cen_bus <- left_join(gid, cen_bus, by = "gid")
jyd_cen_bus[is.na(jyd_cen_bus)] <- 0
# 03. pop_YR_INDEX_ID(서비스인구)----
load('C:\\19project\\07.UCK\\01.Data\\03.Data_Preprocessing\\05.Service_Pop\\pop_YR_INDEX_ID.RData') #pop_svc_2018_hs
#head(pop_YR_INDEX_ID)
svc <- pop_YR_INDEX_ID[pop_YR_INDEX_ID$STD_Y == as.character(yr_anal),]
#head(svc)
svc <- svc[, c("INDEX_ID", "H", "W", "V")]
names(svc) <- c("gid", "H", "W", "V")
jyd_cen_bus_svc <- left_join(jyd_cen_bus, svc, by = "gid")
jyd_cen_bus_svc[is.na(jyd_cen_bus_svc)] <- 0
# 0401. 격자별 ssgi L 대분류
ssgi_L <- read.csv('C:\\19project\\07.UCK\\01.Data\\03.Data_Preprocessing\\04.SSGI\\SSGI_Select_Area_LMS_Buff_380M\\SSGI_L_Buff_380M.csv',
stringsAsFactors = FALSE)
ssgi_L[is.na(ssgi_L)] <- 0
ssgi_L$n_biz <- ssgi_L$D + ssgi_L$F + ssgi_L$L + ssgi_L$N +
ssgi_L$O + ssgi_L$P + ssgi_L$Q + ssgi_L$R + ssgi_L$S
ssgi_L$n_biz_sum <- ssgi_L$D_sum + ssgi_L$F_sum + ssgi_L$L_sum + ssgi_L$N_sum +
ssgi_L$O_sum + ssgi_L$P_sum + ssgi_L$Q_sum + ssgi_L$R_sum + ssgi_L$S_sum
jyd_cen_bus_svc_ssgi <- left_join(jyd_cen_bus_svc, ssgi_L, by="gid")
# 0401. 격자별 ssgi L 대분류
ssgi_L <- read.csv('C:\\19project\\07.UCK\\01.Data\\03.Data_Preprocessing\\04.SSGI\\SSGI_Select_Area_LMS_Buff_380M\\SSGI_L_Buff_380M.csv',
stringsAsFactors = FALSE)
ssgi_L[is.na(ssgi_L)] <- 0
# 0401. 격자별 ssgi L 대분류
ssgi_L <- read.csv('C:\\19project\\07.UCK\\01.Data\\03.Data_Preprocessing\\04.SSGI\\SSGI_Select_Area_LMS_Buff_380M\\SSGI_L_Buff_380M.csv',
stringsAsFactors = FALSE)
ssgi_L[is.na(ssgi_L)] <- 0
sum_len <- length(colnames(ssgi_L))
col_len <- (sum_len - 1) / 2 + 1
ssgi_L$n_biz <- apply(ssgi_L[,2:col_len],1,sum)
ssgi_L$n_biz_sum <- apply(ssgi_L[,(col_len+1):sum_len],1,sum)
load("C:/19Project/07.UCK/01.Data/05.Modeling/jyd_cd_800m_d.RData")
View(jyd_cen_bus_svc)
b <- list.files(bus_path)
bus_path <-  'C:/19Project/07.UCK/01.Data/01.Raw_data/09.Bus_Stop/'
b <- list.files(bus_path)
b
df <- read.csv(paste0(bus_path,bus_file))
bus_file <- list.files(bus_path)
df <- read.csv(paste0(bus_path,bus_file))
df
rename(df,
'LOGITUDE'= 'WGS84경도',
'LATITUDE' = 'WGS84위도')
library(dplyr)
rename(df,
'LOGITUDE'= 'WGS84경도',
'LATITUDE' = 'WGS84위도')
df <- rename(df,
'LOGITUDE'= 'WGS84경도',
'LATITUDE' = 'WGS84위도')
write.csv(df,paste0(move_path,busfile))
move_path <- 'C:/19Project/07.UCK/01.Data/02.Use_Data/'
write.csv(df,paste0(move_path,busfile))
write.csv(df,paste0(move_path,bus_file))
bus_file <- list.files(bus_path)
df <- read.csv(paste0(bus_path,bus_file))
df <- rename(df,
'LOGITUDE'= 'WGS84경도',
'LATITUDE' = 'WGS84위도')
bus_file <- list.files(bus_path)
df <- read.csv(paste0(bus_path,bus_file))
df[,-1]
df[,-2]
df[,-2]
df[,-1]
df[,~1]
df[,1]
source('C:/Users/jjkang/Desktop/버스 컬럼변경.R', encoding = 'UTF-8')
bus_path <- 'C:/19Project/07.UCK/01.Data/01.Raw_data/09.Bus_Stop/'
bus_file <- list.files(path = bus_path)
bus_df <- read.csv(bus_file)
bus_file <- list.files(path = bus_path)
bus_df <- read.csv(bus_file)
bus_df <- read.csv(paste0(bus_path,bus_file))
bus_df
bus_df[,c(9,10)]
names(bus_df[,c(9,10)]) <- c('LATITUDE','LOGITUDE')
bus_df
names(bus_df[,c(9,10)])
names(bus_df)[names(bus_df[,c(9,10)])
names(bus_df)[names(bus_df[,c(9,10)]))
bus_df
names(bus_df)[names(bus_df[,c(9,10)]))
bus_df
names(bus_df)[names(bus_df[,c(9,10)])]
names(bus_df)[,c(9,10)]
names(bus_df)
names(bus_df)[9,10]
names(bus_df)[9:10]
names(bus_df)[9:10] <- c('LATITUDE','LOGITUDE')
bus_df
write.csv(bus_df,paste0(move_path,bus_file))
move_path <- 'C:/19Project/07.UCK/01.Data/02.Use_Data/'
write.csv(bus_df,paste0(move_path,bus_file))
write.csv(bus_df,paste0(move_path,bus_file),row.names = FALSE)
jyd_nm_path <- 'C:/19Project/07.UCK/01.Data/01.Raw_data/11.JYD_NM/'
jyd_nm_file <- list.files(path = jyd_nm_path)
read_xls
readxl::read_xls
readxl::read_xls(paste0(jyd_nm_path,jyd_nm_file))
jyd_nm_df <- readxl::read_xls(paste0(jyd_nm_path,jyd_nm_file))
jyd_nm_df
names(jyd_nm_df) <- c('lbl','JYD_NM','ETC')
jyd_nm_df
read.csv(jyd_nm_df,move_path)
read.csv(jyd_nm_df,paste0(move_path,jyd_nm_file))
jyd_split <- strsplit(jyd_nm_file,".", fixed=TRUE)
jyd_split
jyd_split[[1]][1]
jyd_nm_file <- paste(jyd_split[[1]][1],'csv',sep = '[.]')
jyd_nm_file <- paste(jyd_split[[1]][1],'csv',sep = '.',fixed = TRUE)
jyd_nm_file <- paste(jyd_split[[1]][1],'csv','.')
jyd_nm_file <- paste(jyd_split[[1]][1],'csv',sep = '.')
#Use폴더에 저장
read.csv(jyd_nm_df,paste0(move_path,jyd_nm_file))
#Use폴더에 저장
write.csv(jyd_nm_df,paste0(move_path,jyd_nm_file))
#Use폴더에 저장
write.csv(jyd_nm_df,paste0(move_path,jyd_nm_file),row.names = FALSE)
#읍면동경계 경로
emd_path <- 'C:/19Project/07.UCK/01.Data/01.Raw_data/12.EMD/'
#읍면동경계 경로
emd_path <- 'C:/19Project/07.UCK/01.Data/01.Raw_data/12.EMD/'
file_list <- list.files(path = path)
#shp및 여러파일 move 함수
copy_to_use <- function(path,new_filenm){
temp <- 'C:/19Project/07.UCK/01.Data/02.Use_Data/test'
file_list <- list.files(path = path)
for(i in file_list){
file_path <- paste0(path,i)
file_split <- strsplit(i,".", fixed=TRUE)
new_file_path <- paste0(move_path,new_filenm,'.',file_split[[1]][2])
file.copy(file_path,new_file_path)
}
}
#읍면동경계 move
copy_to_use(emd_path,'EMD')
#인구데이터 경로
pop_path <- 'C:/19Project/07.UCK/01.Data/01.Raw_data/08.NGII_Pop/'
#주용도코드 경로
jyd_path <- 'C:/19Project/07.UCK/01.Data/01.Raw_data/10.JYD/'
#버스정류소 현황 경로
bus_path <- 'C:/19Project/07.UCK/01.Data/01.Raw_data/09.Bus_Stop/'
#건축물용도 코드 경로
jyd_nm_path <- 'C:/19Project/07.UCK/01.Data/01.Raw_data/11.JYD_NM/'
#읍면동경계 경로
emd_path <- 'C:/19Project/07.UCK/01.Data/01.Raw_data/12.EMD/'
#옮길 경로 ( Use_Data 폴더)
move_path <- 'C:/19Project/07.UCK/01.Data/02.Use_Data/'
#총인구(이전) 데이터 경로
tot_pre_path <- paste0(pop_path,'Tot_pop/pre/')
#총인구(현재) 데이터 경로
tot_next_path <- paste0(pop_path,'Tot_pop/next/')
#고령인구(이전) 데이터 경로
eld_pre_path <- paste0(pop_path,'Eld_pop/pre/')
#고령인구(이전) 데이터 경로
eld_next_path <- paste0(pop_path,'Eld_pop/next/')
#생산가능인구(이전) 데이터 경로
wag_pre_path <- paste0(pop_path,'Wag_pop/pre/')
#생산가능인구(이전) 데이터 경로
wag_next_path <- paste0(pop_path,'Wag_pop/next/')
#shp및 여러파일 move 함수
copy_to_use <- function(path,new_filenm){
temp <- 'C:/19Project/07.UCK/01.Data/02.Use_Data/test'
file_list <- list.files(path = path)
for(i in file_list){
file_path <- paste0(path,i)
file_split <- strsplit(i,".", fixed=TRUE)
new_file_path <- paste0(move_path,new_filenm,'.',file_split[[1]][2])
file.copy(file_path,new_file_path)
}
}
#총인구 데이터 move
copy_to_use(tot_pre_path,'Tot_pop_pre')
copy_to_use(tot_next_path,'Tot_pop_cur')
#고령인구 데이터 move
copy_to_use(eld_pre_path,'Eld_pop_pre')
copy_to_use(eld_next_path,'Eld_pop_cur')
#생산가능인구 데이터 move
copy_to_use(wag_pre_path,'Wag_pop_pre')
copy_to_use(wag_next_path,'Wag_pop_cur')
#주용도코드 move
copy_to_use(jyd_path,'jyd')
#읍면동경계 move
copy_to_use(emd_path,'EMD')
#버스정류소 데이터 파일명
bus_file <- list.files(path = bus_path)
#데이터 read
bus_df <- read.csv(paste0(bus_path,bus_file))
#데이터 저장
write.csv(bus_df,paste0(move_path,bus_file),row.names = FALSE)
#컬럼명 변경
names(bus_df)[9:10] <- c('LATITUDE','LOGITUDE')
#데이터 read
jyd_nm_df <- readxl::read_xls(paste0(jyd_nm_path,jyd_nm_file))
#데이터 저장
jyd_split <- strsplit(jyd_nm_file,".", fixed=TRUE)
#건축물용도 코드 데이터 파일명
jyd_nm_file <- list.files(path = jyd_nm_path)
#컬럼명 변경
names(jyd_nm_df) <- c('lbl','JYD_NM','ETC')
#파일확장자명 변경
jyd_nm_file <- paste(jyd_split[[1]][1],'csv',sep = '.')
#Use폴더에 저장
write.csv(jyd_nm_df,paste0(move_path,jyd_nm_file),row.names = FALSE)
#건축물용도 코드 데이터 파일명
jyd_nm_file <- list.files(path = jyd_nm_path)
#데이터 read
jyd_nm_df <- readxl::read_xls(paste0(jyd_nm_path,jyd_nm_file))
#컬럼명 변경
names(jyd_nm_df) <- c('lbl','JYD_NM','ETC')
#데이터 저장
jyd_split <- strsplit(jyd_nm_file,".", fixed=TRUE)
#파일확장자명 변경
jyd_nm_file <- paste(jyd_split[[1]][1],'csv',sep = '.')
#Use폴더에 저장
write.csv(jyd_nm_df,paste0(move_path,jyd_nm_file),row.names = FALSE)
#버스정류소 데이터 파일명
bus_file <- list.files(path = bus_path)
#데이터 read
bus_df <- read.csv(paste0(bus_path,bus_file))
#컬럼명 변경
names(bus_df)[9:10] <- c('LATITUDE','LOGITUDE')
#데이터 저장
write.csv(bus_df,paste0(move_path,bus_file),row.names = FALSE)
